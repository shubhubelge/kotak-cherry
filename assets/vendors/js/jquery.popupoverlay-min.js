/*!
 * jQuery Popup Overlay
 *
 * @requires jQuery v1.7.1+
 * @link https://vast-engineering.github.com/jquery-popup-overlay/
 */
!function(t){var e,o,i=t(window),n={},a=[],p=[],s=null,l="_open",d="_close",r=[],c=null,u=/(iPad|iPhone|iPod)/.test(navigator.userAgent),f={_init:function(e){var o=t(e),i=o.data("popupoptions");p[e.id]=!1,a[e.id]=0,o.data("popup-initialized")||(o.attr("data-popup-initialized","true"),f._initonce(e)),i.autoopen&&setTimeout((function(){f.show(e,0)}),0)},_initonce:function(o){var i,n,a,p=t(o),d=t("body"),r=p.data("popupoptions");(s=parseInt(d.css("margin-right"),10),c=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,r.scrolllock)&&(void 0===e&&(a=(n=t('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),e=a.innerWidth()-a.height(99).innerWidth(),n.remove()));if(p.attr("id")||p.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),p.addClass("popup_content"),r.background&&!t("#"+o.id+"_background").length){d.append('<div id="'+o.id+'_background" class="popup_background"></div>');var h=t("#"+o.id+"_background");h.css({opacity:0,visibility:"hidden",backgroundColor:r.color,position:"fixed",top:0,right:0,bottom:0,left:0}),r.setzindex&&!r.autozindex&&h.css("z-index","100000"),r.transition&&h.css("transition",r.transition)}d.append(o),p.wrap('<div id="'+o.id+'_wrapper" class="popup_wrapper" />'),(i=t("#"+o.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),u&&((h=t("#"+o.id+"_background")).css("cursor","pointer"),t(r.pagecontainer).css("cursor","pointer")),"overlay"==r.type&&!r.absolute&&r.background&&(i.css("overflow","auto"),i[0].style.WebkitOverflowScrolling="touch"),p.css({opacity:0,visibility:"hidden","pointer-events":"auto",display:"inline-block"}),r.setzindex&&!r.autozindex&&i.css("z-index","100001"),r.outline||p.css("outline","none"),r.transition&&(p.css("transition",r.transition),i.css("transition",r.transition)),p.attr("aria-hidden",!0),"overlay"==r.type&&(p.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),i.css({position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"}),i.append('<div class="popup_align" />'),t(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),p.attr("role","dialog");var b=r.openelement?r.openelement:"."+o.id+l;t(b).each((function(e,o){t(o).attr("data-popup-ordinal",e),o.id||t(o).attr("id","open_"+parseInt(1e8*Math.random(),10))})),p.attr("aria-labelledby")||p.attr("aria-label")||p.attr("aria-labelledby",t(b).attr("id")),"hover"==r.action?(r.keepfocus=!1,t(b).on("mouseenter",(function(){f.show(o,t(this).data("popup-ordinal"))})),t(b).on("mouseleave",(function(){f.hide(o)}))):t(document).on("click.jqp",b,(function(e){e.preventDefault();var i=t(this).data("popup-ordinal");setTimeout((function(){f.show(o,i)}),0)})),r.closebutton&&f.addclosebutton(o),r.detach?p.detach():p.hide()},show:function(n,l){var d=t(n);if(!d.data("popup-visible")){d.data("popup-initialized")||f._init(n),d.attr("data-popup-initialized","true");var u=t("body"),b=d.data("popupoptions"),g=t("#"+n.id+"_wrapper"),v=t("#"+n.id+"_background");if(h(n,l,b.beforeopen),p[n.id]=l,setTimeout((function(){r.push(n.id)}),0),b.autozindex){for(var m=document.getElementsByTagName("*"),y=m.length,_=0,k=0;k<y;k++){var w=t(m[k]).css("z-index");"auto"!==w&&_<(w=parseInt(w,10))&&(_=w)}a[n.id]=_,b.background&&a[n.id]>=0&&t("#"+n.id+"_background").css({zIndex:a[n.id]+1}),a[n.id]>=0&&g.css({zIndex:a[n.id]+2})}b.detach?(g.prepend(n),d.show()):d.show(),o=setTimeout((function(){g.css({visibility:"visible",opacity:1}),t("html").addClass("popup_visible").addClass("popup_visible_"+n.id),g.addClass("popup_wrapper_visible")}),20),b.scrolllock&&(u.css("overflow","hidden"),u.height()>i.height()&&u.css("margin-right",s+e)),d.css({visibility:"visible",opacity:1}),b.background&&(v.css({visibility:"visible",opacity:b.opacity}),setTimeout((function(){v.css({opacity:b.opacity})}),0)),d.data("popup-visible",!0),f.reposition(n,l),d.data("focusedelementbeforepopup",document.activeElement),d.attr("tabindex",-1),setTimeout((function(){"closebutton"===b.focuselement?t("#"+n.id+" ."+n.id+"_close:first").focus():b.focuselement?t(b.focuselement).focus():(!0===b.focuselement||b.keepfocus)&&d.focus()}),b.focusdelay),b.keepfocus&&t(b.pagecontainer).attr("aria-hidden",!0),d.attr("aria-hidden",!1),h(n,l,b.onopen),c?g.one("transitionend",(function(){h(n,l,b.opentransitionend)})):h(n,l,b.opentransitionend),"tooltip"==b.type&&t(window).on("resize."+n.id,(function(){f.reposition(n,l)}))}},hide:function(e,i){var n=t.inArray(e.id,r);if(-1!==n){o&&clearTimeout(o);var a=t("body"),l=t(e),d=l.data("popupoptions"),u=t("#"+e.id+"_wrapper"),f=t("#"+e.id+"_background");l.data("popup-visible",!1),1===r.length?t("html").removeClass("popup_visible").removeClass("popup_visible_"+e.id):t("html").hasClass("popup_visible_"+e.id)&&t("html").removeClass("popup_visible_"+e.id),r.splice(n,1),u.hasClass("popup_wrapper_visible")&&u.removeClass("popup_wrapper_visible"),d.keepfocus&&!i&&setTimeout((function(){t(l.data("focusedelementbeforepopup")).is(":visible")&&l.data("focusedelementbeforepopup").focus()}),0),u.css({visibility:"hidden",opacity:0}),l.css({visibility:"hidden",opacity:0}),d.background&&f.css({visibility:"hidden",opacity:0}),t(d.pagecontainer).attr("aria-hidden",!1),l.attr("aria-hidden",!0),h(e,p[e.id],d.onclose),c&&"0s"!==l.css("transition-duration")?l.one("transitionend",(function(){l.data("popup-visible")||(d.detach?l.detach():l.hide()),d.scrolllock&&setTimeout((function(){t.grep(r,(function(e){return t("#"+e).data("popupoptions").scrolllock})).length||a.css({overflow:"visible","margin-right":s})}),10),h(e,p[e.id],d.closetransitionend)})):(d.detach?l.detach():l.hide(),d.scrolllock&&setTimeout((function(){t.grep(r,(function(e){return t("#"+e).data("popupoptions").scrolllock})).length||a.css({overflow:"visible","margin-right":s})}),10),h(e,p[e.id],d.closetransitionend)),"tooltip"==d.type&&t(window).off("resize."+e.id)}},toggle:function(e,o){t(e).data("popup-visible")?f.hide(e):setTimeout((function(){f.show(e,o)}),0)},reposition:function(e,o){var n=t(e),a=n.data("popupoptions"),p=t("#"+e.id+"_wrapper");if(o=o||0,"tooltip"==a.type){var s;p.css({position:"absolute"});var l=(s=a.tooltipanchor?t(a.tooltipanchor):a.openelement?t(a.openelement).filter('[data-popup-ordinal="'+o+'"]'):t("."+e.id+'_open[data-popup-ordinal="'+o+'"]')).offset()||{left:0,top:0};"right"==a.horizontal?p.css("left",l.left+s.outerWidth()+a.offsetleft):"leftedge"==a.horizontal?p.css("left",l.left+a.offsetleft):"left"==a.horizontal?p.css("right",i.width()-l.left-a.offsetleft):"rightedge"==a.horizontal?p.css("right",i.width()-l.left-s.outerWidth()-a.offsetleft):p.css("left",l.left+s.outerWidth()/2-n.outerWidth()/2-parseFloat(n.css("marginLeft"))+a.offsetleft),"bottom"==a.vertical?p.css("top",l.top+s.outerHeight()+a.offsettop):"bottomedge"==a.vertical?p.css("top",l.top+s.outerHeight()-n.outerHeight()+a.offsettop):"top"==a.vertical?p.css("bottom",i.height()-l.top-a.offsettop):"topedge"==a.vertical?p.css("bottom",i.height()-l.top-n.outerHeight()-a.offsettop):p.css("top",l.top+s.outerHeight()/2-n.outerHeight()/2-parseFloat(n.css("marginTop"))+a.offsettop)}else"overlay"==a.type&&(a.horizontal?p.css("text-align",a.horizontal):p.css("text-align","center"),a.vertical?n.css("vertical-align",a.vertical):n.css("vertical-align","middle"),a.absolute&&p.css({position:"absolute",top:window.scrollY}),a.background||(p.css({"pointer-events":"none"}),a.absolute||b(e)||(n.css("overflow","auto"),n[0].style.WebkitOverflowScrolling="touch",n.css("max-height","calc(100% - "+n.css("margin-top")+" - "+n.css("margin-bottom")+")"))))},addclosebutton:function(e){var o;o=t(e).data("popupoptions").closebuttonmarkup?t(n.closebuttonmarkup).addClass(e.id+"_close"):'<button class="popup_close '+e.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">Ã—</span></button>',t(e).data("popup-initialized")&&t(e).append(o)}},h=function(e,o,i){var n,a,p=t(e).data("popupoptions");void 0!==p&&(n=p.openelement?p.openelement:"."+e.id+l,a=t(n+'[data-popup-ordinal="'+o+'"]'),"function"==typeof i&&i.call(t(e),e,a))},b=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)};t(document).on("keydown",(function(e){if(r.length){var o=r[r.length-1],i=document.getElementById(o);t(i).data("popupoptions").escape&&27==e.keyCode&&f.hide(i)}})),t(document).on("click",(function(e){if(r.length){var o=r[r.length-1],i=document.getElementById(o),n=t(i).data("popupoptions").closeelement?t(i).data("popupoptions").closeelement:"."+i.id+d;t(e.target).closest(n).length&&(e.preventDefault(),f.hide(i)),t(i).data("popupoptions")&&t(i).data("popupoptions").blur&&!t(e.target).closest(t(i).data("popupoptions").blurignore).length&&!t(e.target).closest("#"+o).length&&2!==e.which&&t(e.target).is(":visible")&&(t(i).data("popupoptions").background?(f.hide(i),e.preventDefault()):f.hide(i,!0))}})),t(document).on("keydown",(function(e){if(r.length&&9==e.which){var o=r[r.length-1],i=document.getElementById(o);if(!t(i).data("popupoptions").keepfocus)return;var n=t(i).find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),a=t(":focus"),p=n.length,s=n.index(a);0===p?(t(i).focus(),e.preventDefault()):e.shiftKey?0===s&&(n.get(p-1).focus(),e.preventDefault()):s==p-1&&(n.get(0).focus(),e.preventDefault())}})),t.fn.popup=function(e){return this.each((function(){var o=t(this),i=t.extend(!0,{},t.fn.popup.defaults);if(e&&"tooltip"===e.type&&(i.background=!1),"object"==typeof e){var a=t.extend({},i,o.data("popupoptions"),e);o.data("popupoptions",a),n=o.data("popupoptions"),f._init(this)}else"string"==typeof e?(o.data("popupoptions")||(o.data("popupoptions",i),n=o.data("popupoptions")),f[e].call(this,this)):(o.data("popupoptions")||(o.data("popupoptions",i),n=o.data("popupoptions")),f._init(this))}))},t.fn.popup.destroyall=function(){for(var e=0;e<r.length;e++)t("#"+r[e]).popup("hide");t(".popup_wrapper").remove(),t(".popup_background").remove(),t(document).off("click.jqp")},t.fn.popup.defaults={type:"overlay",absolute:!1,autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,blurignore:null,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}(jQuery);